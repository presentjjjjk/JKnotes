# 智能优化算法补充

## 遗传算法改进

### 种群初始化
1.初始化的时候生成更多的个体,例如我维持的种群规模是N,那么一开始就生成5N个个体,只留下最好的N个

2.对初始生成的每个个体做梯度下降优化(这个怎么做到,随机交换两个基因然后梯度下降?)

3.定向初始化:结合问题的信息进行初始化

### 收敛准则

1.固定代数

2.在得到的解足够好的时候就停止优化算法

3.在种群不再改进的时候停止优化(平均适应度没有明显改进,最好的个体的适应度没有明显的改变)

有的时候在代数进一步提升的时候,性能有断崖式的增长,但是消耗的计算资源明显增多,得不偿失

![alt text](image-34.png)

### 编码方式

可以将不同的解统一编成二进制编码,作为遗传算法的基因型,但是采用二进制编码会有明显的缺点就是,两个相隔比较远的数可能只有一位不同,而两个相近的数的编码反倒会有可能大不相同,例如011加一个1就是100,他们三位编码全不相同,为了消除汉明距离,可以采用一种叫做格雷编码的编码方式:

![alt text](image-35.png)

### 选择方案

![alt text](image-36.png)

为了防止漏掉最好的个体,需要限制每个个体最少被选择到的次数和最多被选择到的次数

![alt text](image-37.png)

### 选择压力

![alt text](image-38.png)

### 交叉方案

![alt text](image-39.png)

### 精英策略

![alt text](image-40.png)

## 禁忌搜索

禁忌搜索算法是改进局部搜索算法的一种组合优化算法，他能有效避免算法在迭代的过程中陷入局部最小值的情况，采用了一种叫做禁忌的思想，即在每一次找到局部最小值（最大值）后就把他打上一个标记，纳入到禁忌表当中去，这样，继续迭代的过程中，就不会陷入这个局部最小值，使得该算法拥有更加广阔的搜索空间。

下面是一个形象的图示：

!!! info "图示"

      ![alt text](image-14.png)

以下是一些名词解释：

### 禁忌表

用来存放每一次搜索后得到的局部最小值，确保下一次不会再陷入这个局部最小值，禁忌表有长度限制，会影响到算法运行的效率

那么，为什么禁忌表的长度有限呢？如果禁忌表的长度无限，那么我就可以禁用所有的能获得局部最小值的操作，导致算法在之后的过程中会陷入大量的循环，无法跳脱出现有的搜索空间，达不到一个广泛搜索的目的。从这个角度看，禁忌表的长度也不能太长，当然也不能太短，不然很容易陷入局部最小值当中。

### 禁忌对象

禁忌表中的元素，为了使算法在运算过程中不再陷入局部最小值，禁忌表中的元素的存在形式可以是多种多样的，例如，在TSP问题中，每一次邻域变换实际上就是交换路径中的两个城市，然后获得其总长度。

那么禁忌对象既可以是交换方式，也可以是禁忌表中已经获得的总长度，无论是哪种禁忌对象，都可以一定程度上避免算法“走老路”



### 禁忌期限

禁忌期限也被称作禁忌长度，指的是，禁忌表内的元素，在一定的迭代次数$t$内都不能被选取或者操作，每当迭代进行一次后：

$$
t=t-1
$$

直到$t=0$后，该元素被解禁，具体的禁忌长度可以自己设置，也可以根据邻域中邻居的个数来设定：$t=[\sqrt{n}]$



### 特赦准则

当邻域太小，但是禁忌期限又比较长的时候，就会出现所有的操作都被禁用的现象，此时不一定找到了优化问题的全局最小值，但是不能进行任何操作，这就白白增加了迭代次数，所以，这个时候要使用特赦规则，挑选禁忌表中的某个元素，如果他能够使得目标函数发生较大的变化，则特赦此元素，将他解禁。

### 邻域

![alt text](image-15.png)

每一次对局部最优解的映射都会产生一个邻域，在邻域中选择若干邻居进行评价，得到的新的局部最优解替换掉原来的局部最优解，同时与它进行比较，决定是否替换全局最优解


### 算法流程

!!! info "流程图"
      ![alt text](image-16.png)


具体细节可以参考这篇文章

!!! info 
      - 知乎：[🔗](https://zhuanlan.zhihu.com/p/404205364)

## 粒子群优化

粒子群优化是效仿鸟类觅食的一种优化算法,一个鸟群在觅食过程中,他会参考自己之前找到食物的方向以及种群中找到最多食物的鸟的方向,长此以往,所有的鸟都会在食物最多的地点汇合.

写成数学的形式就是:

设当下的鸟的速度是$v^{(i)}$,位置是$x^{(i)}$,那么他的速度更新的表达式为:

$$
\begin{aligned}
v^{(i+1)}=\omega v^{(i)}+c_1p_1(pbest^{(i)}-x^{(i)})+c_2p_2(gbest^{(i)}-x^{(i)})\\
\end{aligned}
$$

符号说明:

1. $\omega$被称作惯性因子,惯性因子较大,则算法全局寻优能力强,反之,则局部寻优能力强,一般从0.5取到1.5

2. $c_1$被称作个体学习因子,代表从过去的经验中学习到的方向,一般取2

3. $c_2$被称作社会学习因子,即从种群最优个体中学习的方向,一般取2

4. $x^{(i)},v^{(i)}$代表当前的位置和速度
   
5. $pbest^{(i)}$代表这一时刻及其过去这个个体到达的最好的地点
   
6. $gbest^{(i)}$代表这一时刻的全局最优个体所在的位置
   
位置更新的表达式为:

$$
x^{(i+1)}=x^{(i)}+v^{(i)}
$$

每一步的运动时间取做1

在较大的时间容许范围内,鸟群总可以通过这种方式找到食物最多的地方(目标函数全局最优)

![alt text](image-41.png)

这个算法我感觉相当好用,特别是涉及到一些连续空间的优化问题,很难描述可行解的变化过程,这个时候粒子群算法就给出了一种可行解的变化方式.